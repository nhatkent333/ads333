<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>PHẦN 1</title>
    <style>
        img {
          max-width:600px;
          width:100%;
        }

        .cauhoi {
          background-color:green;
          padding:10px;
          font-size:23px;
          font-weight:bold;
          color:white;
        }

        .result {
        font-size:20px;
        font-weight:bold;
        }

        main {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
        }

      .navigation-menu {
          position: fixed;
          bottom: 10px;
          left: 50%;
          transform: translateX(-50%);
          background-color: #FFF9D0;
          padding: 10px 20px;
          border-radius: 10px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      }

      .navigation-menu a {
          margin: 0 10px;
          text-decoration: none;
          color: #000;
          font-weight: bold;
      }
      /* Style cho nút popup */
    #popupButton {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #007bff;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    /* Style cho overlay */
    #overlay {
        display: none;
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 2;
        cursor: pointer;
    }

    /* Style cho popup */
    #popup {
        display: none;
        position: fixed;
        background-color: #fefefe;
        padding: 20px;
        border-radius: 5px;
        width: 400px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 3;
    }

    /* Style cho nút đóng popup */
    #closeButton {
        position: absolute;
        top: 10px;
        right: 10px;
        color: #aaa;
        font-size: 20px;
        text-decoration: none;
    }

    #closeButton:hover,
    #closeButton:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }

    </style>
  </head>
  <body><main>
    <!-- CÂU TRẮC NGHIỆM -->
    <div id="question1" class="question">
        <p class="cauhoi">Câu 1</p>
        <img src="https://daotaolaixehd.com.vn/600cau/cauhoi2/1.jpg">
        <p>
            <label><input type="radio" name="answer1" value="1">1</label>
            <label><input type="radio" name="answer1" value="2">2</label>
            <label><input type="radio" name="answer1" value="3">3</label>
            <label><input type="radio" name="answer1" value="4">4</label>
        </p>
        <div id="result1" class="result"></div>
    </div>
    <div id="question2" class="question">
        <p class="cauhoi">Câu 2</p>
        <img src="https://daotaolaixehd.com.vn/600cau/cauhoi2/2.jpg">
        <p>
            <label><input type="radio" name="answer2" value="1">1</label>
            <label><input type="radio" name="answer2" value="2">2</label>
            <label><input type="radio" name="answer2" value="3">3</label>
            <label><input type="radio" name="answer2" value="4">4</label>
        </p>
        <div id="result2" class="result"></div>
    </div>
    <!-- END CÂU TRẮC NGHIỆM -->

    <!-- Nút popup -->
<button id="popupButton">Thông tin thống kê</button>

<!-- Overlay -->
<div id="overlay"></div>

<!-- Popup -->
<div id="popup">
    <a id="closeButton">&times;</a>
    <h2>Thông tin thống kê các câu trả lời sai</h2>
    <div id="wrongAnswersStats"></div>
</div>
</main>

<script>
    // Dữ liệu JSON cục bộ
    var jsonData = [
        {
            "cau_hoi": "Câu hỏi 1",
            "cau_tra_loi_dung": "2"
        },
        {
            "cau_hoi": "Câu hỏi 2",
            "cau_tra_loi_dung": "2"
        }
    ];
    // Dữ liệu JSON cục bộ

    document.addEventListener("DOMContentLoaded", function () {
        const questions = document.querySelectorAll('.question');
        questions.forEach((question, index) => {
            const answerInputs = question.querySelectorAll('input[type="radio"]');
            answerInputs.forEach(input => {
                input.addEventListener('change', function () {
                    checkAnswer(index + 1);
                });
            });
            // Hiển thị kết quả mặc định
            checkAnswer(index + 1);
        });
    });

    function checkAnswer(questionNumber) {
        const selectedAnswer = document.querySelector('input[name="answer' + questionNumber + '"]:checked');
        if (selectedAnswer) {
            const correctAnswer = jsonData.find(item => item.cau_hoi === 'Câu hỏi ' + questionNumber).cau_tra_loi_dung;
            const resultElement = document.getElementById('result' + questionNumber);
            if (selectedAnswer.value === correctAnswer) {
                resultElement.innerHTML = '<p style="color: yellow; background-color: blue; padding:15px;">Đúng</p>';
            } else {
                resultElement.innerHTML = '<p style="color: white; background-color: red; padding:15px;">Sai. Câu đúng là ' + correctAnswer + '</p>';
            }

            // Lưu cookie với thời gian hết hạn là 30 ngày
            var expireDate = new Date();
            expireDate.setDate(expireDate.getDate() + 30);
            var expiresGMT = expireDate.toGMTString();
            document.cookie = "answer" + questionNumber + "=" + selectedAnswer.value + "; expires=" + expiresGMT + "; path=/";
        }
    }

    // Load lại câu trả lời lưu trong cookie nếu có
    window.onload = function () {
        const cookieArr = document.cookie.split(';');
        cookieArr.forEach(cookie => {
            const [name, value] = cookie.split('=');
            const questionNumber = name.trim().replace("answer", "");
            const selectedAnswer = document.querySelector('input[name="answer' + questionNumber + '"][value="' + value + '"]');
            if (selectedAnswer) {
                selectedAnswer.checked = true;
                checkAnswer(questionNumber);
            }
        });
    };

  // Xử lý sự kiện khi click vào nút popup
    document.getElementById("popupButton").addEventListener("click", function() {
        document.getElementById("overlay").style.display = "block";
        document.getElementById("popup").style.display = "block";
        showWrongAnswersStats();
    });

    // Xử lý sự kiện khi click vào nút đóng popup
    document.getElementById("closeButton").addEventListener("click", function() {
        document.getElementById("overlay").style.display = "none";
        document.getElementById("popup").style.display = "none";
    });

    // Hàm để hiển thị thông tin thống kê các câu trả lời sai
    function showWrongAnswersStats() {
        var stats = '';
        for (var i = 0; i < jsonData.length; i++) {
            var questionNumber = i + 1;
            var correctAnswer = jsonData[i].cau_tra_loi_dung;
            var selectedAnswer = document.querySelector('input[name="answer' + questionNumber + '"]:checked');
            if (selectedAnswer && selectedAnswer.value !== correctAnswer) {
                stats += 'Câu ' + questionNumber +'<br>';
            }
        }
        document.getElementById('wrongAnswersStats').innerHTML = stats;
    }
</script>


</body>
</html>
