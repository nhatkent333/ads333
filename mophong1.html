  <div class="timer">
  <div class="timer-bar"></div>
  <div class="timer-flag"></div>
  <div class="timer-controls">
    <button id="start-btn">Start</button>
    <button id="flag-btn">Flag</button>
  </div>
</div>

<div class="result">
  <p>Score: <span id="score">0</span></p>
  <p>Flagged at: <span id="flag-time">N/A</span></p>
</div>

<style>
	.timer {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.timer-bar-container {
  width: 80%;
  margin-top: 20px;
  position: relative;
}

.timer-bar {
  height: 20px;
  background-color: #ddd;
  width: 100%;
  border-radius: 10px;
}

.timer-flag {
  position: absolute;
  top: -20px;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 0 10px 20px 10px;
  border-color: transparent transparent #007bff transparent;
}

.timer-buttons {
  margin-top: 20px;
}

.timer-buttons button {
  margin-right: 10px;
}

#score-container {
  margin-top: 20px;
}

#flag-time-container {
  margin-top: 20px;
}

</style>

<script>
	const progressBar = document.querySelector('.timer-bar');
const flagIndicator = document.querySelector('.timer-flag');
const startBtn = document.querySelector('#start-btn');
const flagBtn = document.querySelector('#flag-btn');
const scoreDisplay = document.querySelector('#score');
const flagTimeDisplay = document.querySelector('#flag-time');

let intervalId;
let startTime;
let flagTime;
let score = 0;
let isFlagged = false;

function startTimer() {
  startTime = Date.now();
  flagIndicator.style.display = 'block';
  intervalId = setInterval(updateTimer, 10);
}

function updateTimer() {
  const elapsedTime = Date.now() - startTime;
  const progress = elapsedTime / 15000;
  progressBar.style.width = `${progress * 100}%`;

  if (!isFlagged && elapsedTime >= 5000 && elapsedTime <= 9999.9) {
    flagBtn.disabled = false;
  }
}

function flagTimer() {
  if (isFlagged) {
    return;
  }
  isFlagged = true;
  flagTime = Date.now() - startTime;

  // Calculate score
  if (flagTime >= 5000 && flagTime <= 5999.9) {
    score = 5;
  } else if (flagTime >= 6000 && flagTime <= 6999.9) {
    score = 4;
  } else if (flagTime >= 7000 && flagTime <= 7999.9) {
    score = 3;
  } else if (flagTime >= 8000 && flagTime <= 8999.9) {
    score = 2;
  } else if (flagTime >= 9000 && flagTime <= 9999.9) {
    score = 1;
  } else {
    score = 0;
  }
  
  scoreDisplay.textContent = score;

  // Display flag time
  const flagTimeSeconds = Math.floor(flagTime / 1000);
  const flagTimeMilliseconds = flagTime % 1000;
  flagTimeDisplay.textContent = `${flagTimeSeconds}.${flagTimeMilliseconds} s`;

  flagBtn.disabled = true;
}

startBtn.addEventListener('click', startTimer);
flagBtn.addEventListener('click', flagTimer);

// Listen for space bar press
document.addEventListener('keydown', function (event) {
  if (!isFlagged && event.code === 'Space') {
    event.preventDefault();
    flagBtn.click();
  }
});

</script>
